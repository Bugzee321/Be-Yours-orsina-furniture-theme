{%- liquid
  assign logo_position = section.settings.logo_position
  assign enable_transparent_header = false

  if template == 'index' and section.settings.enable_transparent_header
    assign enable_transparent_header = true
  endif

  if template.name == 'collection' and section.settings.enable_transparent_header_collection and collection.image
    assign enable_transparent_header = false
  endif

  if request.page_type == 'page' and section.settings.enable_transparent_header_custom != blank and section.settings.enable_transparent_header_custom.links != blank
    for link in section.settings.enable_transparent_header_custom.links
      if page.handle == link.object.handle
        assign enable_transparent_header = true
      endif
    endfor
  endif

  assign enable_dropdown_menu = section.settings.enable_dropdown_menu
  assign enable_sticky_header = section.settings.enable_sticky_header
-%}

{%- style -%}
  #shopify-section-{{ section.id }} {
    --section-padding-top: {{ section.settings.padding_top }}px;
    --section-padding-bottom: {{ section.settings.padding_bottom }}px;
    --image-logo-height: {{ section.settings.mobile_logo_height }}px;
    --gradient-header-background: {% if section.settings.gradient_background != blank %}{{ section.settings.gradient_background }}{% else %}{{ section.settings.colors_background }}{% endif %};
    --color-header-background: {{ section.settings.colors_background.red }}, {{ section.settings.colors_background.green }}, {{ section.settings.colors_background.blue }};
    --color-header-foreground: {{ section.settings.colors_text.red }}, {{ section.settings.colors_text.green }}, {{ section.settings.colors_text.blue }};
    --color-header-border: {{ section.settings.colors_border.red }}, {{ section.settings.colors_border.green }}, {{ section.settings.colors_border.blue }};
    --color-highlight: {{ section.settings.colors_highlight.red }}, {{ section.settings.colors_highlight.green }}, {{ section.settings.colors_highlight.blue }};
    --color-icons: {{ section.settings.colors_icons.red }}, {{ section.settings.colors_icons.green }}, {{ section.settings.colors_icons.blue }};
    --icon-weight: 1.5px;
  }
{%- endstyle -%}
<style>
  /* Single Line Header CSS - Complete Version with Full Width Mega Menu for Desktop */
  * {
    box-sizing: border-box;
  }
  
  /* Header Wrapper */
  .header-wrapper {
    background-color: {% if enable_transparent_header %}transparent{% else %}rgb(var(--color-header-background)){% endif %};
    border-bottom: {% if enable_transparent_header %}none{% else %}1px solid rgb(var(--color-header-border)){% endif %};
    position: relative;
    transition: all 0.3s ease;
    overflow: visible !important;
    z-index: 100;
  }
  
  .header-wrapper.header-transparent {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    z-index: 100;
    background-color: transparent;
    border-bottom: none;
  }
  
  /* Shopify Section Header */
  .shopify-section-header {
    position: relative;
    z-index: 90;
    overflow: visible !important;
  }
  
  .shopify-section-header-sticky {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    z-index: 90;
  }
  
  /* Sticky Header */
  sticky-header {
    position: relative;
    z-index: 90;
    overflow: visible !important;
  }
  
  /* MAIN HEADER - FLEXIBLE LAYOUT */
  .header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 1px 1px;
    width: 100%;
    max-width: 1400px;
    margin: 0 auto;
    position: relative;
    gap: 20px;
    z-index: 101;
  }
  
  /* Logo Section - FLEXIBLE */
  .header__left {
    flex: 0 1 auto;
    display: flex;
    align-items: center;
    gap: 16px;
    min-width: 0;
  }
  
  .header__heading-link {
    text-decoration: none;
    color: {% if enable_transparent_header %}{{ section.settings.transparent_text_color }}{% else %}rgb(var(--color-header-foreground)){% endif %};
    display: flex;
    align-items: center;
  }
  
  .header__heading-logo {
    height: var(--image-logo-height);
    width: auto;
    max-width: 100%;
    object-fit: contain;
  }
  
  .header__heading .h2 {
    font-size: clamp(20px, 4vw, 28px);
    font-weight: 700;
    letter-spacing: 2px;
    margin: 0;
    white-space: nowrap;
  }
  
  /* CENTER MAIN MENU - FLEXIBLE */
  .header__center {
    flex: 1 1 auto;
    display: flex;
    justify-content: center;
    margin: 0 20px;
    min-width: 0;
    overflow: visible !important;
    position: static;
  }
  
  .nav-menu {
    display: flex;
    align-items: center;
    gap: clamp(15px, 2vw, 30px);
    list-style: none;
    margin: 0;
    padding: 0;
    flex-wrap: nowrap;
  }
  
  .nav-item {
    position: relative;
    flex: 0 1 auto;
    z-index: auto;
  }
  
  .nav-item:hover {
    z-index: 9998;
  }
  
  .nav-item.active {
    z-index: 9998;
  }
  
  .nav-link {
    display: block;
    padding: 8px 0;
    color: {% if enable_transparent_header %}{{ section.settings.transparent_text_color }}{% else %}rgb(var(--color-header-foreground)){% endif %};
    text-decoration: none;
    font-size: clamp(12px, 1.2vw, 14px);
    font-weight: 500;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    transition: color 0.3s ease;
    white-space: nowrap;
  }
  
  .nav-link:hover,
  .nav-item:hover .nav-link {
    color: rgb(var(--color-highlight));
  }
  
  .nav-link.sale {
    color: #e74c3c;
    font-weight: 600;
  }
  
  /* Icons Section - FLEXIBLE */
  .header__right {
    flex: 0 1 auto;
    display: flex;
    align-items: center;
    gap: clamp(12px, 2vw, 20px);
  }
  
  .header__icon {
    color: {% if enable_transparent_header %}{{ section.settings.transparent_text_color }}{% else %}rgb(var(--color-icons)){% endif %};
    cursor: pointer;
    transition: color 0.3s ease;
    text-decoration: none;
    position: relative;
    padding: 4px;
    background: none;
    border: none;
    outline: none;
  }
  
  /* Search button specific - Remove all borders */
  .search-modal-toggle {
    background: none !important;
    border: none !important;
    outline: none !important;
    box-shadow: none !important;
    padding: 4px;
  }
  
  .header__icon:focus {
    outline: none;
    box-shadow: none;
  }
  
  .header__icon:hover {
    color: rgb(var(--color-highlight));
    transform: translateY(-2px);
  }
  
  .header__icon svg {
    width: 22px;
    height: 22px;
    stroke-width: var(--icon-weight);
  }
  
  .cart-count-bubble {
    background-color: #e74c3c;
    color: white;
    border-radius: 50%;
    width: 18px;
    height: 18px;
    font-size: 11px;
    font-weight: 600;
    display: flex;
    align-items: center;
    justify-content: center;
    position: absolute;
    top: -8px;
    right: -8px;
    animation: cartBubblePulse 0.3s ease;
  }

  @keyframes cartBubblePulse {
    0% { transform: scale(1); }
    50% { transform: scale(1.2); }
    100% { transform: scale(1); }
  }
  
  /* MEGA MENU - FULL WIDTH FOR DESKTOP */
  .mega-menu {
    position: fixed !important;
    top: var(--mega-menu-top, 60px) !important;
    left: 0 !important;
    right: 0 !important;
    width: 100vw !important;
    transform: none !important;
    background-color: white;
    border: 1px solid rgb(var(--color-header-border));
    border-left: none;
    border-right: none;
    border-top: none;
    box-shadow: 0 10px 40px rgba(0,0,0,0.15);
    border-radius: 0;
    opacity: 0;
    visibility: hidden;
    transition: all 0.3s ease;
    z-index: 9999 !important;
    pointer-events: none;
    margin-top: -1px;
    max-height: 80vh;
    overflow-y: auto;
  }
  
  .nav-item:hover .mega-menu,
  .nav-item.active .mega-menu {
    opacity: 1;
    visibility: visible;
    pointer-events: all;
  }
  
  .mega-menu-content {
    padding: 40px;
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
    gap: 25px;
    width: 100%;
    max-width: 1400px;
    margin: 0 auto;
    background-color: white;
    position: relative;
    z-index: 9999;
    min-height: auto;
  }
  
  /* Flexible Grid Based on Item Count and Screen Size */
  @media screen and (min-width: 1400px) {
    .mega-menu-content {
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 30px;
    }
    
    /* For many items on large screens */
    .mega-menu-content.many-items {
      grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
      gap: 25px;
    }
  }
  
  @media screen and (max-width: 1399px) and (min-width: 1200px) {
    .mega-menu-content {
      grid-template-columns: repeat(auto-fit, minmax(190px, 1fr));
      gap: 25px;
    }
    
    .mega-menu-content.many-items {
      grid-template-columns: repeat(auto-fit, minmax(170px, 1fr));
      gap: 20px;
    }
  }
  
  @media screen and (max-width: 1199px) and (min-width: 900px) {
    .mega-menu-content {
      grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
      gap: 20px;
      padding: 35px;
    }
    
    .mega-menu-content.many-items {
      grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
      gap: 18px;
    }
  }
  
  @media screen and (max-width: 899px) and (min-width: 768px) {
    .mega-menu-content {
      grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
      gap: 18px;
      padding: 30px;
    }
    
    .mega-menu-content.many-items {
      grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
      gap: 15px;
    }
  }
  
  .menu-column {
    padding: 0 10px;
    min-width: 0;
  }
  
  /* Updated clickable heading styles */
  .menu-column h3 {
    margin: 0;
    padding: 0;
  }
  
  .menu-column-heading {
    font-size: 13px;
    font-weight: 600;
    color: #2c2c2c;
    margin-bottom: 15px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    border-bottom: 2px solid rgb(var(--color-highlight));
    padding-bottom: 8px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    text-decoration: none;
    display: block;
    transition: all 0.3s ease;
  }
  
  .menu-column-heading:hover {
    color: rgb(var(--color-highlight));
    transform: translateX(3px);
  }
  
  /* Responsive adjustments for column headers */
  @media screen and (max-width: 1199px) {
    .menu-column-heading {
      font-size: 12px;
      margin-bottom: 12px;
      padding-bottom: 6px;
    }
  }
  
  @media screen and (max-width: 899px) {
    .menu-column {
      padding: 0 8px;
    }
    
    .menu-column-heading {
      font-size: 11px;
      margin-bottom: 10px;
    }
  }
  
  /* Extra columns class for 7+ columns */
  .mega-menu-content.extra-columns {
    grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
    gap: 20px;
  }
  
  @media screen and (max-width: 1199px) {
    .mega-menu-content.extra-columns {
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 15px;
    }
  }
  
  @media screen and (max-width: 899px) {
    .mega-menu-content.extra-columns {
      grid-template-columns: repeat(auto-fit, minmax(130px, 1fr));
      gap: 12px;
    }
  }
  
  .menu-items {
    display: flex;
    flex-direction: column;
    gap: 8px;
  }
  
  .menu-item {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 6px;
    text-decoration: none;
    color: #666;
    font-size: 13px;
    transition: all 0.3s ease;
    border-radius: 4px;
  }
  
  .menu-item:hover {
    color: rgb(var(--color-highlight));
    background-color: rgba(var(--color-highlight), 0.05);
    transform: translateX(3px);
  }
  
  /* UPDATED MEGA MENU ICON SIZE */
  .menu-icon {
    width: 42px;
    height: 42px;
    background-color: #f5f3f0;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
    flex-shrink: 0;
    transition: transform 0.3s ease;
  }
  
  /* Responsive menu items */
  @media screen and (max-width: 1199px) {
    .menu-item {
      gap: 8px;
      padding: 5px;
      font-size: 12px;
    }
    
    .menu-icon {
      width: 36px;
      height: 36px;
    }
  }
  
  @media screen and (max-width: 899px) {
    .menu-item {
      gap: 6px;
      padding: 4px;
      font-size: 11px;
    }
    
    .menu-icon {
      width: 32px;
      height: 32px;
    }
  }
  
  /* For extra small items in mega menu */
  .mega-menu-content.many-items .menu-item {
    font-size: 12px;
    padding: 5px;
    gap: 8px;
  }
  
  .mega-menu-content.many-items .menu-icon {
    width: 36px;
    height: 36px;
  }
  
  .mega-menu-content.extra-columns .menu-item {
    font-size: 11px;
    padding: 4px;
    gap: 6px;
  }
  
  .mega-menu-content.extra-columns .menu-icon {
    width: 32px;
    height: 32px;
  }
  
  .menu-item:hover .menu-icon {
    transform: scale(1.1);
  }
  
  .menu-icon img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }
  
  /* Mobile Menu Toggle */
  .mobile-menu-toggle {
    display: none;
    background: none;
    border: none;
    padding: 8px;
    cursor: pointer;
    color: {% if enable_transparent_header %}{{ section.settings.transparent_text_color }}{% else %}rgb(var(--color-icons)){% endif %};
    z-index: 102;
  }
  
  .mobile-menu-toggle:hover {
    color: rgb(var(--color-highlight));
  }
  
  /* Mobile Menu Styles */
  .mobile-menu {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100vh;
    background: white;
    z-index: 10000;
    transform: translateX(-100%);
    transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    overflow-y: auto;
  }
  
  .mobile-menu.active {
    transform: translateX(0);
    box-shadow: 2px 0 20px rgba(0,0,0,0.2);
  }
  
  .mobile-menu-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 20px 24px;
    border-bottom: 1px solid #eee;
    background-color: #fafafa;
  }
  
  .mobile-menu-logo {
    flex: 1;
  }
  
  .mobile-menu-close {
    background: none;
    border: none;
    font-size: 28px;
    cursor: pointer;
    color: #333;
    padding: 0;
    width: 35px;
    height: 35px;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: transform 0.3s ease;
  }
  
  .mobile-menu-close:hover {
    transform: rotate(90deg);
    color: rgb(var(--color-highlight));
  }
  
  .mobile-menu-content {
    padding: 20px 24px;
  }
  
  .mobile-nav-item {
    border-bottom: 1px solid #f0f0f0;
    transition: background-color 0.3s ease;
  }
  
  .mobile-nav-item:hover {
    background-color: #fafafa;
  }
  
  .mobile-nav-link {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 16px 0;
    color: #333;
    text-decoration: none;
    font-weight: 500;
    font-size: 16px;
    transition: color 0.3s ease;
  }
  
  .mobile-nav-link:hover {
    color: rgb(var(--color-highlight));
  }
  
  .mobile-dropdown-toggle {
    background: none;
    border: none;
    color: #666;
    font-size: 20px;
    cursor: pointer;
    padding: 0 0 0 10px;
    transition: transform 0.3s ease;
  }
  
  .mobile-dropdown-toggle.active {
    transform: rotate(45deg);
  }
  
  .mobile-dropdown {
    display: none;
    padding: 10px 0 10px 20px;
    background-color: #f9f9f9;
    margin: 0 -24px;
    padding-right: 24px;
    padding-left: 44px;
  }
  
  .mobile-dropdown.active {
    display: block;
    animation: slideDown 0.3s ease;
  }
  
  @keyframes slideDown {
    from {
      opacity: 0;
      transform: translateY(-10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  
  .mobile-sub-item {
    padding: 8px 0;
  }
  
  .mobile-sub-link {
    color: #666;
    text-decoration: none;
    font-size: 14px;
    display: flex;
    align-items: center;
    gap: 12px;
    transition: all 0.3s ease;
    padding: 8px 12px;
    border-radius: 6px;
    margin: 2px 0;
  }
  
  .mobile-sub-link:hover {
    color: rgb(var(--color-highlight));
    background-color: rgba(var(--color-highlight), 0.05);
    transform: translateX(5px);
  }
  
  .mobile-menu-icon {
    width: 35px;
    height: 35px;
    background-color: #f0f0f0;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
    flex-shrink: 0;
    transition: transform 0.3s ease;
  }
  
  .mobile-sub-link:hover .mobile-menu-icon {
    transform: scale(1.1);
  }
  
  .mobile-menu-icon img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }
  
  .mobile-menu-icon.no-image {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    font-size: 16px;
  }
  
  /* Collection item with special styling if it has image */
  .mobile-sub-item.has-image {
    background: linear-gradient(90deg, rgba(var(--color-highlight), 0.05) 0%, transparent 100%);
    border-left: 3px solid rgb(var(--color-highlight));
    border-radius: 0 8px 8px 0;
    margin: 4px 0;
  }
  
  /* Search in mobile menu */
  .mobile-search {
    padding: 20px 0;
    border-bottom: 1px solid #eee;
    position: relative;
  }
  
  .mobile-search-input {
    width: 100%;
    padding: 12px 45px 12px 16px;
    border: 2px solid #ddd;
    border-radius: 25px;
    font-size: 16px;
    outline: none;
    transition: border-color 0.3s ease;
  }
  
  .mobile-search-input:focus {
    border-color: rgb(var(--color-highlight));
  }
  
  /* Search Modal Styles */
  .search-modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100vh;
    background: rgba(0,0,0,0.8);
    backdrop-filter: blur(5px);
    z-index: 10001;
    display: flex;
    align-items: flex-start;
    justify-content: center;
    padding-top: 10vh;
    opacity: 0;
    visibility: hidden;
    transition: all 0.3s ease;
  }
  
  .search-modal.active {
    opacity: 1;
    visibility: visible;
  }
  
  .search-modal-content {
    background: white;
    border-radius: 12px;
    width: 90%;
    max-width: 600px;
    max-height: 80vh;
    overflow: hidden;
    transform: translateY(-20px) scale(0.95);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    box-shadow: 0 20px 60px rgba(0,0,0,0.3);
  }
  
  .search-modal.active .search-modal-content {
    transform: translateY(0) scale(1);
  }
  
  .search-modal-header {
    padding: 20px 24px;
    border-bottom: 1px solid #eee;
    display: flex;
    align-items: center;
    gap: 16px;
    position: relative;
  }
  
  .search-modal-input {
    flex: 1;
    border: none;
    outline: none;
    font-size: 18px;
    color: #333;
    background: transparent;
    padding-right: 40px;
  }
  
  .search-modal-input::placeholder {
    color: #999;
  }
  
  .search-modal-close {
    position: absolute;
    top: 50%;
    right: 20px;
    transform: translateY(-50%);
    background: none;
    border: none;
    font-size: 28px;
    cursor: pointer;
    color: #666;
    width: 36px;
    height: 36px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 50%;
    transition: all 0.3s ease;
  }
  
  .search-modal-close:hover {
    background-color: #f5f5f5;
    transform: translateY(-50%) rotate(90deg);
    color: rgb(var(--color-highlight));
  }
  
  /* Dynamic grid classes applied by JavaScript */
  .mega-menu-content.dynamic-grid-1 {
    grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
    gap: 20px;
  }
  
  .mega-menu-content.dynamic-grid-2 {
    grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
    gap: 22px;
  }
  
  .mega-menu-content.dynamic-grid-3 {
    grid-template-columns: repeat(auto-fit, minmax(170px, 1fr));
    gap: 18px;
  }
  
  .mega-menu-content.dynamic-grid-4 {
    grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
    gap: 16px;
  }
  
  .mega-menu-content.dynamic-grid-5 {
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    gap: 15px;
  }
  
  /* Scroll optimization for mega menu with many items */
  .mega-menu-content.many-items {
    max-height: 70vh;
    overflow-y: auto;
  }
  
  .mega-menu-content.extra-columns {
    max-height: 75vh;
    overflow-y: auto;
  }
  
  /* Hover optimization for performance */
  .mega-menu-content {
    will-change: scroll-position;
    transform: translateZ(0);
  }

  /* ============ ENHANCED CART DRAWER STYLES START ============ */
  /* Cart Drawer Overlay */
  .cart-drawer-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.5);
    z-index: 99998;
    opacity: 0;
    visibility: hidden;
    transition: all 0.3s ease;
  }
  
  .cart-drawer-overlay.active {
    opacity: 1;
    visibility: visible;
  }
  
  /* 
   * MOBILE CART DRAWER LAYOUT:
   * ┌─────────────────────────────────┐
   * │ Cart Items (Top - Expandable)   │
   * │ • Product list (scrollable)     │
   * │ ─────────────────────────────── │
   * │ CHECKOUT BUTTONS (Static)       │
   * ├─────────────────────────────────┤
   * │ You May Also Like (Bottom-200px)│
   * │ [Product] [Product] [Product]   │
   * │ ← horizontal scroll →           │
   * └─────────────────────────────────┘
   */

  /* Cart Drawer Container - Fixed Mobile Layout */
  .cart-drawer {
    position: fixed;
    top: 0;
    right: -100%;
    width: 100%;
    max-width: 900px;
    height: 100%;
    background: #fff;
    z-index: 99999;
    transition: right 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    display: flex;
    box-shadow: -5px 0 20px rgba(0, 0, 0, 0.1);
  }
  
  .cart-drawer.active {
    right: 0;
  }

  /* Desktop Layout - Side by Side */
  @media screen and (min-width: 991px) {
    .cart-drawer {
      flex-direction: row;
      width: 900px;
      right: -900px;
    }
  }

  /* Mobile Layout - Stack Vertically for Better UX */
  @media screen and (max-width: 990px) {
    .cart-drawer {
      flex-direction: column;
      width: 100%;
      right: -100%;
    }
  }
  
  /* YOU MAY ALSO LIKE SECTION - Responsive Layout */
  .you-may-like-section {
    background: #FCF9F6;
    overflow-y: auto;
    padding: 20px;
    flex-shrink: 0;
    order: 1;
  }

  /* Desktop: Left sidebar */
  @media screen and (min-width: 991px) {
    .you-may-like-section {
      width: 380px;
      height: 100%;
      border-right: 1px solid #E5E5E5;
      padding: 30px;
    }
  }

  /* Mobile: Bottom fixed section */
  @media screen and (max-width: 990px) {
    .you-may-like-section {
      width: 100%;
      height: 200px; /* Fixed height */
      border-top: 1px solid #E5E5E5;
      padding: 15px;
      order: 3; /* Always at bottom */
      flex-shrink: 0; /* Never shrink */
      display: flex;
      flex-direction: column;
      overflow: hidden; /* Prevent overall scrolling */
    }
  }
  
  .you-may-like-title {
    font-size: 11px;
    font-weight: 400;
    letter-spacing: 2px;
    text-transform: uppercase;
    color: #666;
    margin: 0 0 20px 0;
    text-align: center;
  }

  /* Mobile: Smaller title for fixed bottom section */
  @media screen and (max-width: 990px) {
    .you-may-like-title {
      font-size: 10px;
      margin: 0 0 10px 0;
    }
  }
  
  .you-may-like-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    gap: 20px;
    overflow-x: auto;
    scroll-snap-type: x mandatory;
    padding-bottom: 10px;
  }

  /* Mobile: Smaller grid items for fixed bottom */
  @media screen and (max-width: 990px) {
    .you-may-like-grid {
      grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
      gap: 12px;
      padding-bottom: 5px;
      overflow-x: auto;
      scroll-snap-type: x proximity;
    }
  }

  .you-may-like-item {
    background: white;
    border-radius: 8px;
    padding: 15px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.05);
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
    transition: all 0.3s ease;
  }
  
  .you-may-like-item:hover {
    transform: translateY(-3px);
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
  }

  /* Mobile: Compact items */
  @media screen and (max-width: 990px) {
    .you-may-like-item {
      padding: 8px;
      border-radius: 6px;
    }
  }

  .you-may-like-image {
    width: 100%;
    height: 200px;
    object-fit: cover;
    border-radius: 4px;
    margin-bottom: 10px;
  }

  /* Mobile: Smaller images */
  @media screen and (max-width: 990px) {
    .you-may-like-image {
      height: 100px;
      margin-bottom: 5px;
    }
  }

  .you-may-like-name {
    font-size: 14px;
    font-weight: 500;
    color: #333;
    margin-bottom: 5px;
    line-height: 1.3;
  }

  /* Mobile: Smaller text */
  @media screen and (max-width: 990px) {
    .you-may-like-name {
      font-size: 11px;
      margin-bottom: 3px;
    }
  }

  .you-may-like-price {
    font-size: 13px;
    color: #666;
    margin-bottom: 10px;
  }

  /* Mobile: Smaller price */
  @media screen and (max-width: 990px) {
    .you-may-like-price {
      font-size: 10px;
      margin-bottom: 5px;
    }
  }

  .you-may-like-add {
    width: 100%;
    padding: 8px;
    background: rgb(var(--color-highlight));
    color: white;
    border: none;
    border-radius: 4px;
    font-size: 13px;
    cursor: pointer;
    transition: all 0.3s ease;
  }

  .you-may-like-add:hover {
    opacity: 0.9;
    transform: translateY(-1px);
  }

  /* Mobile: Compact button */
  @media screen and (max-width: 990px) {
    .you-may-like-add {
      padding: 6px;
      font-size: 10px;
    }
  }

  /* Cart Items Section - Flexible Layout */
  .cart-items-section {
    flex: 1 1 auto;
    display: flex;
    flex-direction: column;
    min-height: 0;
    order: 2;
  }

  /* Desktop: Right content */
  @media screen and (min-width: 991px) {
    .cart-items-section {
      width: calc(100% - 380px);
    }
  }

  /* Mobile: Top scrollable section */
  @media screen and (max-width: 990px) {
    .cart-items-section {
      width: 100%;
      overflow-y: auto;
      flex: 1;
      order: 1;
    }
  }

  .cart-drawer-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 20px 30px;
    border-bottom: 1px solid #E5E5E5;
    position: sticky;
    top: 0;
    background: white;
    z-index: 10;
  }

  @media screen and (max-width: 990px) {
    .cart-drawer-header {
      padding: 15px 20px;
    }
  }

  .cart-drawer-title {
    font-size: 18px;
    font-weight: 600;
    color: #333;
  }

  @media screen and (max-width: 990px) {
    .cart-drawer-title {
      font-size: 16px;
    }
  }

  .cart-drawer-close {
    background: none;
    border: none;
    font-size: 28px;
    cursor: pointer;
    color: #666;
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s ease;
  }

  .cart-drawer-close:hover {
    color: rgb(var(--color-highlight));
    transform: rotate(90deg);
  }

  @media screen and (max-width: 990px) {
    .cart-drawer-close {
      font-size: 24px;
      width: 30px;
      height: 30px;
    }
  }

  .cart-drawer-body {
    flex: 1;
    overflow-y: auto;
    padding: 20px 30px;
    min-height: 0;
  }

  @media screen and (max-width: 990px) {
    .cart-drawer-body {
      padding: 15px 20px;
    }
  }

  .cart-drawer-empty {
    text-align: center;
    padding: 60px 20px;
    color: #666;
  }

  .cart-drawer-empty svg {
    width: 80px;
    height: 80px;
    margin-bottom: 20px;
    opacity: 0.3;
  }

  .cart-drawer-empty-title {
    font-size: 18px;
    font-weight: 600;
    margin-bottom: 10px;
  }

  .cart-drawer-empty-subtitle {
    font-size: 14px;
    margin-bottom: 30px;
  }

  @media screen and (max-width: 990px) {
    .cart-drawer-empty {
      padding: 40px 15px;
    }

    .cart-drawer-empty-title {
      font-size: 16px;
    }

    .cart-drawer-empty-subtitle {
      font-size: 12px;
      margin-bottom: 20px;
    }
  }

  .cart-empty-menu-button {
    background: transparent;
    border: 2px solid #E5E5E5;
    border-radius: 25px;
    padding: 12px 25px;
    font-size: 14px;
    font-weight: 600;
    color: #333;
    cursor: pointer;
    transition: all 0.3s ease;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
    text-transform: uppercase;
    letter-spacing: 1px;
  }

  .cart-empty-menu-button.active {
    border-color: rgb(var(--color-highlight));
    color: rgb(var(--color-highlight));
  }

  .cart-empty-menu-button:hover {
    border-color: rgb(var(--color-highlight));
    color: rgb(var(--color-highlight));
    transform: translateY(-2px);
  }

  @media screen and (max-width: 990px) {
    .cart-empty-menu-button {
      padding: 10px 20px;
      font-size: 12px;
    }
  }

  .cart-empty-menu {
    margin-top: 30px;
    padding: 0 40px;
  }

  @media screen and (max-width: 990px) {
    .cart-empty-menu {
      margin-top: 20px;
      padding: 0 20px;
    }
  }

  .empty-cart-menu-item {
    display: block;
    padding: 15px 0;
    font-size: 16px;
    font-weight: 500;
    color: #333;
    text-decoration: none;
    text-align: center;
    border-bottom: 1px solid #E5E5E5;
    transition: all 0.3s ease;
  }

  .empty-cart-menu-item:hover {
    color: rgb(var(--color-highlight));
    transform: translateX(5px);
  }

  .empty-cart-menu-item:last-child {
    border-bottom: none;
  }

  @media screen and (max-width: 990px) {
    .empty-cart-menu-item {
      padding: 12px 0;
      font-size: 14px;
    }
  }

  .cart-item {
    display: flex;
    gap: 20px;
    padding: 20px 0;
    border-bottom: 1px solid #E5E5E5;
    position: relative;
    transition: all 0.3s ease;
    animation: fadeIn 0.3s ease;
  }

  .cart-item.removing {
    opacity: 0;
    transform: translateX(20px);
  }

  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
  }

  @media screen and (max-width: 990px) {
    .cart-item {
      gap: 15px;
      padding: 15px 0;
    }
  }

  .cart-item-image-wrapper {
    flex: 0 0 100px;
    position: relative;
  }

  @media screen and (max-width: 990px) {
    .cart-item-image-wrapper {
      flex: 0 0 80px;
    }
  }

  .cart-item-image {
    width: 100px;
    height: 100px;
    object-fit: cover;
    border-radius: 4px;
    box-shadow: 0 1px 4px rgba(0,0,0,0.05);
  }

  @media screen and (max-width: 990px) {
    .cart-item-image {
      width: 80px;
      height: 80px;
    }
  }

  .cart-remove-btn {
    position: absolute;
    top: 0;
    right: 0;
    background: rgba(231, 76, 60, 0.9);
    color: white;
    border: none;
    width: 24px;
    height: 24px;
    border-radius: 50%;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 14px;
    transition: all 0.3s ease;
  }

  .cart-remove-btn:hover {
    background: #e74c3c;
    transform: scale(1.1);
  }

  @media screen and (max-width: 990px) {
    .cart-remove-btn {
      width: 20px;
      height: 20px;
      font-size: 12px;
    }
  }

  .cart-item-details {
    flex: 1;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    min-height: 100px;
  }

  @media screen and (max-width: 990px) {
    .cart-item-details {
      min-height: 80px;
    }
  }

  .cart-item-name {
    font-size: 15px;
    font-weight: 500;
    color: #333;
    margin-bottom: 5px;
    line-height: 1.3;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  @media screen and (max-width: 990px) {
    .cart-item-name {
      font-size: 13px;
      margin-bottom: 3px;
    }
  }

  .cart-item-variant {
    font-size: 12px;
    color: #666;
    margin-bottom: 10px;
  }

  @media screen and (max-width: 990px) {
    .cart-item-variant {
      font-size: 11px;
      margin-bottom: 5px;
    }
  }

  .cart-item-actions {
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  .cart-quantity-selector {
    display: flex;
    align-items: center;
    border: 1px solid #E5E5E5;
    border-radius: 4px;
    overflow: hidden;
  }

  .quantity-btn {
    background: #F8F6F3;
    border: none;
    padding: 8px 15px;
    cursor: pointer;
    font-size: 16px;
    color: #666;
    transition: background 0.3s ease;
  }

  .quantity-btn:hover {
    background: #E5E5E5;
  }

  .quantity-btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }

  .quantity-value {
    border: none;
    width: 40px;
    text-align: center;
    font-size: 14px;
    color: #333;
    background: white;
  }

  @media screen and (max-width: 990px) {
    .quantity-btn {
      padding: 6px 12px;
      font-size: 14px;
    }

    .quantity-value {
      width: 30px;
      font-size: 12px;
    }
  }

  .cart-item-total {
    font-size: 15px;
    font-weight: 600;
    color: #333;
  }

  @media screen and (max-width: 990px) {
    .cart-item-total {
      font-size: 13px;
    }
  }

  .cart-drawer-footer {
    padding: 20px 30px;
    border-top: 1px solid #E5E5E5;
    background: white;
    position: sticky;
    bottom: 0;
    z-index: 10;
    order: 3;
  }

  @media screen and (max-width: 990px) {
    .cart-drawer-footer {
      padding: 15px 20px;
      order: 2;
    }
  }

  .cart-subtotal {
    display: flex;
    justify-content: space-between;
    margin-bottom: 20px;
    font-size: 16px;
    font-weight: 600;
    color: #333;
  }

  @media screen and (max-width: 990px) {
    .cart-subtotal {
      margin-bottom: 15px;
      font-size: 14px;
    }
  }

  .cart-subtotal-label {
    color: #666;
    font-weight: 500;
  }

  .cart-checkout-btn {
    width: 100%;
    padding: 15px;
    background: rgb(var(--color-highlight));
    color: white;
    border: none;
    border-radius: 4px;
    font-size: 16px;
    font-weight: 600;
    cursor: pointer;
    text-transform: uppercase;
    letter-spacing: 1px;
    transition: all 0.3s ease;
  }

  .cart-checkout-btn:hover {
    opacity: 0.9;
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
  }

  @media screen and (max-width: 990px) {
    .cart-checkout-btn {
      padding: 12px;
      font-size: 14px;
    }
  }

  /* ============ ENHANCED CART DRAWER STYLES END ============ */

  /* ============ WISHLIST & COMPARE STYLES START ============ */
  
  /* Wishlist Icon Styles */
  .wishlist-count-bubble {
    background-color: #ff6b6b;
    color: white;
    border-radius: 50%;
    width: 18px;
    height: 18px;
    font-size: 11px;
    font-weight: 600;
    display: flex;
    align-items: center;
    justify-content: center;
    position: absolute;
    top: -8px;
    right: -8px;
    animation: wishlistPulse 0.3s ease;
  }

  @keyframes wishlistPulse {
    0% { transform: scale(1); }
    50% { transform: scale(1.2); }
    100% { transform: scale(1); }
  }
  
  /* Compare Icon Styles */
  .compare-count-bubble {
    background-color: #4CAF50;
    color: white;
    border-radius: 50%;
    width: 18px;
    height: 18px;
    font-size: 11px;
    font-weight: 600;
    display: flex;
    align-items: center;
    justify-content: center;
    position: absolute;
    top: -8px;
    right: -8px;
    animation: comparePulse 0.3s ease;
  }

  @keyframes comparePulse {
    0% { transform: scale(1); }
    50% { transform: scale(1.2); }
    100% { transform: scale(1); }
  }
  
  /* Compare Products Modal */
  .compare-modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100vh;
    background: rgba(0,0,0,0.8);
    backdrop-filter: blur(5px);
    z-index: 100000;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 20px;
    opacity: 0;
    visibility: hidden;
    transition: all 0.3s ease;
  }
  
  .compare-modal.active {
    opacity: 1;
    visibility: visible;
  }
  
  .compare-modal-content {
    background: white;
    border-radius: 12px;
    width: 100%;
    max-width: 1200px;
    max-height: 90vh;
    overflow: hidden;
    display: flex;
    flex-direction: column;
    transform: translateY(-20px) scale(0.95);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    box-shadow: 0 20px 60px rgba(0,0,0,0.3);
  }
  
  .compare-modal.active .compare-modal-content {
    transform: translateY(0) scale(1);
  }
  
  .compare-modal-header {
    padding: 20px 30px;
    border-bottom: 2px solid #E5E5E5;
    display: flex;
    justify-content: space-between;
    align-items: center;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
  }
  
  .compare-modal-title {
    font-size: 20px;
    font-weight: 600;
    letter-spacing: 1px;
    display: flex;
    align-items: center;
    gap: 10px;
  }
  
  .compare-modal-close {
    background: rgba(255,255,255,0.2);
    border: none;
    font-size: 28px;
    cursor: pointer;
    color: white;
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 50%;
    transition: all 0.3s ease;
  }
  
  .compare-modal-close:hover {
    background: rgba(255,255,255,0.3);
    transform: rotate(90deg);
  }
  
  .compare-modal-body {
    flex: 1;
    overflow-y: auto;
    display: flex;
    flex-direction: column;
    padding: 0;
  }
  
  /* Product Selection Section */
  .compare-selection-section {
    background: #F8F6F3;
    padding: 20px;
    border-bottom: 1px solid #E5E5E5;
  }
  
  .compare-selection-title {
    font-size: 14px;
    font-weight: 600;
    color: #666;
    margin-bottom: 15px;
    text-transform: uppercase;
    letter-spacing: 1px;
  }
  
  .compare-products-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
    gap: 15px;
    max-height: 200px;
    overflow-y: auto;
    padding: 10px;
    background: white;
    border-radius: 8px;
  }
  
  .compare-product-card {
    background: white;
    border: 2px solid #E5E5E5;
    border-radius: 8px;
    padding: 10px;
    cursor: pointer;
    transition: all 0.3s ease;
    text-align: center;
    position: relative;
  }
  
  .compare-product-card:hover {
    border-color: #667eea;
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
  }
  
  .compare-product-card.selected {
    border-color: #4CAF50;
    background: #E8F5E9;
  }
  
  .compare-product-card.selected::after {
    content: '✓';
    position: absolute;
    top: 5px;
    right: 5px;
    background: #4CAF50;
    color: white;
    width: 20px;
    height: 20px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 12px;
    font-weight: bold;
  }
  
  .compare-product-image {
    width: 80px;
    height: 80px;
    object-fit: cover;
    border-radius: 4px;
    margin-bottom: 8px;
  }
  
  .compare-product-name {
    font-size: 11px;
    color: #333;
    line-height: 1.3;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
  
  .compare-product-price {
    font-size: 12px;
    color: #667eea;
    font-weight: 600;
    margin-top: 5px;
  }
  
  /* Comparison Table Section */
  .compare-table-section {
    flex: 1;
    padding: 20px;
    overflow-y: auto;
  }
  
  .compare-empty-state {
    text-align: center;
    padding: 60px 20px;
    color: #666;
  }
  
  .compare-empty-icon {
    width: 100px;
    height: 100px;
    margin: 0 auto 20px;
    opacity: 0.3;
  }
  
  .compare-table-container {
    display: grid;
    grid-template-columns: 150px 1fr 1fr;
    gap: 0;
    background: white;
    border-radius: 12px;
    overflow: hidden;
    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
  }
  
  /* Comparison Header */
  .compare-table-header {
    display: contents;
  }
  
  .compare-header-label {
    background: #667eea;
    color: white;
    padding: 15px;
    font-weight: 600;
    font-size: 14px;
    text-align: center;
    text-transform: uppercase;
    letter-spacing: 1px;
  }
  
  .compare-header-product {
    background: #F8F6F3;
    padding: 20px;
    text-align: center;
    border-right: 1px solid #E5E5E5;
    position: relative;
  }
  
  .compare-header-product:last-child {
    border-right: none;
  }
  
  .compare-product-main-image {
    width: 150px;
    height: 150px;
    object-fit: cover;
    border-radius: 8px;
    margin-bottom: 15px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
  }
  
  .compare-product-title {
    font-size: 16px;
    font-weight: 600;
    color: #333;
    margin-bottom: 10px;
    line-height: 1.3;
  }
  
  .compare-product-main-price {
    font-size: 20px;
    color: #667eea;
    font-weight: 700;
  }
  
  .compare-remove-btn {
    position: absolute;
    top: 10px;
    right: 10px;
    background: rgba(231, 76, 60, 0.9);
    color: white;
    border: none;
    width: 30px;
    height: 30px;
    border-radius: 50%;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s ease;
  }
  
  .compare-remove-btn:hover {
    background: #e74c3c;
    transform: scale(1.1);
  }
  
  /* Comparison Rows */
  .compare-table-row {
    display: contents;
  }
  
  .compare-row-label {
    background: #F8F6F3;
    padding: 15px;
    font-weight: 600;
    font-size: 13px;
    color: #666;
    border-top: 1px solid #E5E5E5;
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }
  
  .compare-row-value {
    padding: 15px;
    font-size: 14px;
    color: #333;
    border-top: 1px solid #E5E5E5;
    border-right: 1px solid #E5E5E5;
    text-align: center;
  }
  
  .compare-row-value:last-child {
    border-right: none;
  }
  
  .compare-row-value.highlight {
    background: #FFF3CD;
    font-weight: 600;
  }
  
  .compare-row-value.better {
    background: #D4EDDA;
    color: #155724;
    font-weight: 600;
  }
  
  /* Action Buttons */
  .compare-actions {
    padding: 20px;
    background: #F8F6F3;
    border-top: 2px solid #E5E5E5;
    display: flex;
    gap: 15px;
    justify-content: center;
  }
  
  .compare-add-to-cart {
    padding: 12px 30px;
    background: #667eea;
    color: white;
    border: none;
    border-radius: 25px;
    font-size: 14px;
    font-weight: 600;
    cursor: pointer;
    text-transform: uppercase;
    letter-spacing: 1px;
    transition: all 0.3s ease;
  }
  
  .compare-add-to-cart:hover {
    background: #764ba2;
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
  }
  
  .compare-clear-btn {
    padding: 12px 30px;
    background: transparent;
    color: #e74c3c;
    border: 2px solid #e74c3c;
    border-radius: 25px;
    font-size: 14px;
    font-weight: 600;
    cursor: pointer;
    text-transform: uppercase;
    letter-spacing: 1px;
    transition: all 0.3s ease;
  }
  
  .compare-clear-btn:hover {
    background: #e74c3c;
    color: white;
    transform: translateY(-2px);
  }
  
  /* Mobile Responsive */
  @media screen and (max-width: 768px) {
    .compare-modal-content {
      max-width: 100%;
      margin: 10px;
    }
    
    .compare-table-container {
      grid-template-columns: 100px 1fr 1fr;
    }
    
    .compare-product-main-image {
      width: 100px;
      height: 100px;
    }
    
    .compare-product-title {
      font-size: 14px;
    }
    
    .compare-row-label {
      font-size: 11px;
      padding: 10px 5px;
    }
    
    .compare-row-value {
      font-size: 12px;
      padding: 10px 5px;
    }
    
    .wishlist-count-bubble,
    .compare-count-bubble {
      width: 16px;
      height: 16px;
      font-size: 10px;
      top: -6px;
      right: -6px;
    }
  }
  
  @media screen and (max-width: 480px) {
    .compare-table-container {
      display: block;
    }
    
    .compare-header-product {
      display: block;
      margin-bottom: 20px;
    }
    
    .compare-table-row {
      display: block;
      margin-bottom: 10px;
    }
    
    .compare-row-label {
      display: block;
      background: #667eea;
      color: white;
      margin-bottom: 5px;
    }
    
    .compare-row-value {
      display: block;
      border: none;
      padding: 10px;
      margin-bottom: 5px;
      background: #F8F6F3;
      border-radius: 4px;
    }
  }
  
  /* Wishlist Styles */
  .wishlist-heart {
    transition: all 0.3s ease;
  }
  
  .wishlist-heart.active {
    color: #ff6b6b;
    fill: #ff6b6b;
  }
  
  /* ============ WISHLIST & COMPARE STYLES END ============ */
</style>

<!-- Header HTML Structure -->
<div class="header-wrapper {% if enable_transparent_header %}header-transparent{% endif %}">
  <sticky-header>
    <header class="header">
      <!-- LEFT: Mobile Toggle + Logo -->
      <div class="header__left">
        <button class="mobile-menu-toggle" onclick="toggleMobileMenu()">
          <svg width="24" height="24">
            <use href="#icon-menu"></use>
          </svg>
        </button>

        <a href="{{ routes.root_url }}" class="header__heading-link">
          {% if section.settings.logo != blank %}
            <img src="{{ section.settings.logo | img_url: 'master' }}" alt="{{ shop.name }}" class="header__heading-logo desktop-logo">
            <img src="{{ section.settings.mobile_logo | img_url: 'master' }}" alt="{{ shop.name }}" class="header__heading-logo mobile-logo">
          {% else %}
            <h2 class="h2">{{ shop.name }}</h2>
          {% endif %}
        </a>
      </div>

      <!-- CENTER: Main Menu -->
      <div class="header__center">
        <ul class="nav-menu">
          {% for link in section.settings.menu.links %}
            <li class="nav-item">
              <a href="{{ link.url }}" class="nav-link {% if link.child_active or link.active %}active{% endif %}">
                {{ link.title }}
              </a>
              {% if link.links != blank and section.settings.enable_dropdown_menu %}
                <div class="mega-menu">
                  <div class="mega-menu-content" data-columns="{{ link.links.size }}" data-items="{{ total_subitems }}">
                    {% for child_link in link.links %}
                      <div class="menu-column">
                        <a href="{{ child_link.url }}" class="menu-column-heading">{{ child_link.title }}</a>
                        {% if child_link.links != blank %}
                          <div class="menu-items">
                            {% for grandchild_link in child_link.links %}
                              <a href="{{ grandchild_link.url }}" class="menu-item">
                                {% if grandchild_link.object.image %}
                                  <div class="menu-icon">
                                    <img src="{{ grandchild_link.object.image | img_url: 'small' }}" alt="{{ grandchild_link.title }}">
                                  </div>
                                {% endif %}
                                {{ grandchild_link.title }}
                              </a>
                            {% endfor %}
                          </div>
                        {% endif %}
                      </div>
                    {% endfor %}
                  </div>
                </div>
              {% endif %}
            </li>
          {% endfor %}
        </ul>
      </div>

      <!-- RIGHT: Search (Desktop Only) + Wishlist + Compare + Account + Cart Icons -->
      <div class="header__right">
        <!-- Search Icon - Desktop Only -->
        <button class="header__icon search-modal-toggle" onclick="openSearchModal()" title="{{ 'general.search.search' | t }}">
          <svg width="24" height="24">
            <use href="#icon-search"></use>
          </svg>
        </button>
        
        <!-- Wishlist Icon -->
        <button class="header__icon wishlist-icon" onclick="toggleWishlist()" title="Wishlist">
          <svg width="24" height="24" class="wishlist-heart">
            <use href="#icon-heart"></use>
          </svg>
          <span class="wishlist-count-bubble" id="wishlist-count" style="display: none;">0</span>
        </button>
        
        <!-- Compare Icon -->
        <button class="header__icon compare-icon" onclick="openCompareModal()" title="Compare Products">
          <svg width="24" height="24">
            <use href="#icon-compare"></use>
          </svg>
          <span class="compare-count-bubble" id="compare-count" style="display: none;">0</span>
        </button>
        
        <!-- Account -->
        {%- if shop.customer_accounts_enabled -%}
          <a href="{%- if customer -%}{{ routes.account_url }}{%- else -%}{{ routes.account_login_url }}{%- endif -%}" class="header__icon" title="{%- if customer -%}{{ 'customer.account_fallback' | t }}{%- else -%}{{ 'customer.log_in' | t }}{%- endif -%}">
            <svg width="24" height="24">
              <use href="#icon-account"></use>
            </svg>
          </a>
        {%- endif -%}

        <!-- Cart - Opens Drawer with Perfect Empty State Handling -->
        <button class="header__icon" id="cart-icon-bubble" onclick="openCartDrawer()" title="{{ 'templates.cart.cart' | t }}">
          <svg width="24" height="24">
            <use href="#icon-cart"></use>
          </svg>
          <span class="cart-count-bubble" style="display: {% if cart.item_count > 0 %}flex{% else %}none{% endif %}">
            {% if cart.item_count > 0 %}{{ cart.item_count }}{% endif %}
          </span>
        </button>
      </div>
    </header>
  </sticky-header>
</div>

<!-- Mobile Menu HTML -->
<div class="mobile-menu" id="mobile-menu">
  <div class="mobile-menu-header">
    <div class="mobile-menu-logo">
      <a href="{{ routes.root_url }}">
        {% if section.settings.mobile_logo != blank %}
          <img src="{{ section.settings.mobile_logo | img_url: 'master' }}" alt="{{ shop.name }}" height="var(--image-logo-height)">
        {% else %}
          <h2 class="h2">{{ shop.name }}</h2>
        {% endif %}
      </a>
    </div>
    <button class="mobile-menu-close" onclick="closeMobileMenu()">×</button>
  </div>
  <div class="mobile-menu-content">
    {% for link in section.settings.menu.links %}
      <div class="mobile-nav-item">
        <a href="{{ link.url }}" class="mobile-nav-link">
          {{ link.title }}
          {% if link.links != blank %}
            <button class="mobile-dropdown-toggle" onclick="toggleMobileDropdown(this)">+</button>
          {% endif %}
        </a>
        {% if link.links != blank %}
          <div class="mobile-dropdown">
            {% for child_link in link.links %}
              <div class="mobile-sub-item {% if child_link.object.image %}has-image{% endif %}">
                <a href="{{ child_link.url }}" class="mobile-sub-link">
                  {% if child_link.object.image %}
                    <div class="mobile-menu-icon">
                      <img src="{{ child_link.object.image | img_url: 'small' }}" alt="{{ child_link.title }}">
                    </div>
                  {% endif %}
                  {{ child_link.title }}
                </a>
              </div>
            {% endfor %}
          </div>
        {% endif %}
      </div>
    {% endfor %}
  </div>
</div>

<!-- Search Modal -->
<div class="search-modal" id="search-modal" onclick="closeSearchModal(event)">
  <div class="search-modal-content">
    <div class="search-modal-header">
      <svg width="24" height="24" fill="none" stroke="currentColor">
        <circle cx="11" cy="11" r="8" stroke-width="2"/>
        <line x1="21" y1="21" x2="16.65" y2="16.65" stroke-width="2"/>
      </svg>
      <input type="text" id="search-modal-input" class="search-modal-input" placeholder="Search products...">
      <button class="search-modal-close" onclick="closeSearchModal()">×</button>
    </div>
  </div>
</div>

<!-- Cart Drawer HTML -->
<div class="cart-drawer-overlay" onclick="closeCartDrawer()"></div>
<div class="cart-drawer" id="cart-drawer">
  <!-- You May Also Like Section -->
  <div class="you-may-like-section">
    <h3 class="you-may-like-title">{{ section.settings.recommended_title | default: 'You May Also Like' }}</h3>
    <div class="you-may-like-grid" id="you-may-like-grid">
      <!-- Recommendations will be loaded here -->
    </div>
  </div>

  <!-- Cart Items Section -->
  <div class="cart-items-section">
    <div class="cart-drawer-header">
      <h2 class="cart-drawer-title">Your Cart</h2>
      <button class="cart-drawer-close" onclick="closeCartDrawer()">×</button>
    </div>
    <div class="cart-drawer-body" id="cart-drawer-body">
      <!-- Cart items will be loaded here -->
    </div>
    <div class="cart-drawer-footer" id="cart-drawer-footer" style="display: none;">
      <div class="cart-subtotal">
        <span class="cart-subtotal-label">Subtotal</span>
        <span id="cart-subtotal"></span>
      </div>
      <button class="cart-checkout-btn" onclick="window.location.href = '/checkout'">Checkout</button>
    </div>
  </div>
</div>

<!-- Compare Products Modal -->
<div class="compare-modal" id="compare-modal">
  <div class="compare-modal-content">
    <div class="compare-modal-header">
      <h2 class="compare-modal-title">
        <svg width="24" height="24" fill="none" stroke="currentColor">
          <path d="M3 9h18M9 3v18" stroke-width="2" stroke-linecap="round"/>
        </svg>
        Compare Products
      </h2>
      <button class="compare-modal-close" onclick="closeCompareModal()">×</button>
    </div>
    
    <div class="compare-modal-body">
      <!-- Product Selection Section -->
      <div class="compare-selection-section">
        <h3 class="compare-selection-title">Select Products to Compare (Based on Your Cart Items)</h3>
        <div class="compare-products-grid" id="compare-products-grid">
          <!-- Products will be loaded here dynamically -->
        </div>
      </div>
      
      <!-- Comparison Table Section -->
      <div class="compare-table-section" id="compare-table-section">
        <div class="compare-empty-state" id="compare-empty-state">
          <svg class="compare-empty-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <rect x="3" y="3" width="7" height="7" stroke-width="1.5"/>
            <rect x="14" y="3" width="7" height="7" stroke-width="1.5"/>
            <rect x="3" y="14" width="7" height="7" stroke-width="1.5"/>
            <rect x="14" y="14" width="7" height="7" stroke-width="1.5"/>
          </svg>
          <p>Select up to 2 products to compare</p>
        </div>
        
        <div class="compare-table-container" id="compare-table" style="display: none;">
          <!-- Comparison table will be generated here -->
        </div>
      </div>
    </div>
    
    <div class="compare-actions" id="compare-actions" style="display: none;">
      <button class="compare-add-to-cart" onclick="addComparedToCart()">Add Both to Cart</button>
      <button class="compare-clear-btn" onclick="clearComparison()">Clear Comparison</button>
    </div>
  </div>
</div>

<!-- SVG Icons -->
<svg style="display: none;">
  <!-- Existing icons -->
  <symbol id="icon-search" viewBox="0 0 24 24">
    <circle cx="11" cy="11" r="8" fill="none" stroke="currentColor" stroke-width="2"/>
    <line x1="21" y1="21" x2="16.65" y2="16.65" stroke="currentColor" stroke-width="2"/>
  </symbol>
  <symbol id="icon-account" viewBox="0 0 24 24">
    <circle cx="12" cy="7" r="4" fill="none" stroke="currentColor" stroke-width="2"/>
    <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2" fill="none" stroke="currentColor" stroke-width="2"/>
  </symbol>
  <symbol id="icon-cart" viewBox="0 0 24 24">
    <circle cx="9" cy="21" r="1" fill="none" stroke="currentColor" stroke-width="2"/>
    <circle cx="20" cy="21" r="1" fill="none" stroke="currentColor" stroke-width="2"/>
    <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6" fill="none" stroke="currentColor" stroke-width="2"/>
  </symbol>
  <symbol id="icon-menu" viewBox="0 0 24 24">
    <line x1="3" y1="12" x2="21" y2="12" stroke="currentColor" stroke-width="2"/>
    <line x1="3" y1="6" x2="21" y2="6" stroke="currentColor" stroke-width="2"/>
    <line x1="3" y1="18" x2="21" y2="18" stroke="currentColor" stroke-width="2"/>
  </symbol>

  <!-- New icons -->
  <symbol id="icon-compare" fill="none" viewBox="0 0 24 24">
    <rect x="3" y="3" width="18" height="18" rx="2" stroke="currentColor" stroke-width="2"/>
    <line x1="12" y1="3" x2="12" y2="21" stroke="currentColor" stroke-width="2"/>
    <line x1="3" y1="12" x2="21" y2="12" stroke="currentColor" stroke-width="2"/>
  </symbol>
  <symbol id="icon-heart" fill="none" viewBox="0 0 24 24">
    <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z" stroke="currentColor" stroke-width="2"/>
  </symbol>
</svg>

<!-- JavaScript -->
<script>
  // ============ ENHANCED CART DRAWER JAVASCRIPT START ============

  // Global Variables
  let cartDrawerOpen = false;
  let cartData = null;
  let lastAddedProductHandle = null;

  // Open Cart Drawer
  function openCartDrawer() {
    const drawer = document.getElementById('cart-drawer');
    const overlay = document.querySelector('.cart-drawer-overlay');
    
    if (drawer && overlay) {
      drawer.classList.add('active');
      overlay.classList.add('active');
      document.body.style.overflow = 'hidden';
      cartDrawerOpen = true;
      
      loadCartDrawer();
    }
  }

  // Close Cart Drawer
  function closeCartDrawer() {
    const drawer = document.getElementById('cart-drawer');
    const overlay = document.querySelector('.cart-drawer-overlay');
    
    if (drawer && overlay) {
      drawer.classList.remove('active');
      overlay.classList.remove('active');
      document.body.style.overflow = '';
      cartDrawerOpen = false;
    }
  }

  // Update Cart Count in Header
  function updateCartCount() {
    const cartCountBubble = document.querySelector('.cart-count-bubble');
    if (cartCountBubble) {
      const count = cartData ? cartData.item_count : 0;
      cartCountBubble.textContent = count;
      cartCountBubble.style.display = count > 0 ? 'flex' : 'none';
    }
  }

  // Load Cart Drawer Content
  async function loadCartDrawer() {
    try {
      const response = await fetch('/cart.js');
      cartData = await response.json();
      renderCartDrawer();
      updateCartCount();
    } catch (error) {
      console.error('Error loading cart:', error);
    }
  }

  // Load Recommendations
  async function loadRecommendations() {
    const grid = document.getElementById('you-may-like-grid');
    if (!grid) return;
    
    grid.innerHTML = '';
    
    try {
      let products = [];
      
      // Primary: Use last added product for recommendations
      if (lastAddedProductHandle) {
        const productResponse = await fetch(`/products/${lastAddedProductHandle}.js`);
        if (productResponse.ok) {
          const productData = await productResponse.json();
          const collectionId = productData.collections ? productData.collections[0].id : null;
          
          if (collectionId) {
            const collectionResponse = await fetch(`/collections/${collectionId}/products.json?limit=20`);
            if (collectionResponse.ok) {
              const collectionData = await collectionResponse.json();
              products = collectionData.products.filter(p => p.handle !== lastAddedProductHandle);
            }
          }
        }
      }
      
      // Fallback: Use section recommended collection
      if (products.length < 10 && '{{ section.settings.recommended_collection }}' !== '') {
        const collectionResponse = await fetch('/collections/{{ section.settings.recommended_collection.handle }}/products.json?limit={{ section.settings.recommended_products_count }}');
        if (collectionResponse.ok) {
          const collectionData = await collectionResponse.json();
          products = collectionData.products;
        }
      }
      
      // Render recommendations
      products.slice(0, 20).forEach(product => {
        const html = `
          <div class="you-may-like-item">
            <img src="${product.images[0] ? product.images[0].src : ''}" alt="${product.title}" class="you-may-like-image">
            <div class="you-may-like-name">${product.title}</div>
            <div class="you-may-like-price">${formatMoney(product.variants[0].price)}</div>
            <button class="you-may-like-add" onclick="addToCartAndOpen(${product.variants[0].id}, 1, '${product.handle}')">Add to Cart</button>
          </div>
        `;
        grid.innerHTML += html;
      });
      
    } catch (error) {
      console.error('Error loading recommendations:', error);
    }
  }

  // Render Cart Drawer
  function renderCartDrawer() {
    const cartBody = document.getElementById('cart-drawer-body');
    const cartSubtotal = document.getElementById('cart-subtotal');
    const cartTotal = document.getElementById('cart-total');
    const cartFooter = document.getElementById('cart-drawer-footer');
    
    if (!cartBody || !cartFooter) return;
    
    if (!cartData || cartData.item_count === 0) {
      // Empty Cart State with Menu
      cartBody.innerHTML = `
        <div class="cart-drawer-empty">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <circle cx="9" cy="21" r="1" stroke-width="1.5"/>
            <circle cx="20" cy="21" r="1" stroke-width="1.5"/>
            <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6" stroke-width="1.5"/>
          </svg>
          <h3 class="cart-drawer-empty-title">Your cart is empty</h3>
          <p class="cart-drawer-empty-subtitle">Start browsing our collections</p>
          {% if section.settings.show_empty_cart_menu %}
            {% if section.settings.empty_cart_menu_type == 'toggle' %}
              <button class="cart-empty-menu-button" onclick="toggleEmptyCartMenu(this)">
                {{ section.settings.empty_cart_menu_title | default: 'Browse Menu' }} <span>▼</span>
              </button>
            {% endif %}
            <div id="empty-cart-menu" style="display: {% if section.settings.empty_cart_menu_type == 'direct' %}block{% else %}none{% endif %}">
              ${generateServerSideMenu()}
            </div>
          {% endif %}
        </div>
      `;
      cartFooter.style.display = 'none';
      
      // Load recommendations even when empty
      loadRecommendations();
      return;
    }
    
    // Render cart items
    let cartHTML = '';
    cartData.items.forEach(item => {
      const itemTotal = formatMoney(item.final_line_price);
      
      cartHTML += `
        <div class="cart-item" data-key="${item.key}">
          <div class="cart-item-image-wrapper">
            <img src="${item.image}" alt="${item.title}" class="cart-item-image">
          </div>
          <div class="cart-item-details">
            <div>
              <div class="cart-item-name">${item.product_title}</div>
              <div class="cart-item-variant">${item.variant_title}</div>
            </div>
            <div class="cart-item-actions">
              <div class="cart-quantity-selector">
                <button class="quantity-btn" onclick="updateQuantity('${item.key}', ${item.quantity - 1})" ${item.quantity <= 1 ? 'disabled' : ''}>−</button>
                <input type="text" class="quantity-value" value="${item.quantity}" readonly>
                <button class="quantity-btn" onclick="updateQuantity('${item.key}', ${item.quantity + 1})">+</button>
              </div>
              <div class="cart-item-total">
                ${itemTotal}
              </div>
            </div>
          </div>
          <button class="cart-remove-btn" onclick="removeCartItem('${item.key}')">×</button>
        </div>
      `;
    });
    
    cartBody.innerHTML = cartHTML;
    
    // Update footer (ONLY when cart has items)
    cartFooter.style.display = 'block';
    if (cartSubtotal) cartSubtotal.textContent = formatMoney(cartData.total_price || 0);
    if (cartTotal) cartTotal.textContent = formatMoney(cartData.total_price || 0);
    
    // Load recommendations with context of current cart items
    loadRecommendations();
  }

  // Generate Server-Side Menu HTML
  function generateServerSideMenu() {
    // This will be populated by server-side template
    return `{% assign empty_menu = section.settings.empty_cart_menu %}{% assign main_menu = section.settings.menu %}{% if empty_menu != blank %}{% for link in empty_menu.links %}<a href="{{ link.url }}" class="empty-cart-menu-item" onclick="closeCartDrawer()">{{ link.title | escape }}</a>{% endfor %}{% elsif main_menu != blank %}{% for link in main_menu.links %}<a href="{{ link.url }}" class="empty-cart-menu-item" onclick="closeCartDrawer()">{{ link.title | escape }}</a>{% endfor %}{% else %}<div style="text-align: center; padding: 20px; color: #666; font-size: 12px;"><p>📂 No menu available</p><small>Please configure a menu in theme settings</small></div>{% endif %}`;
  }

  // Toggle Empty Cart Menu
  window.toggleEmptyCartMenu = function(button) {
    const menu = document.getElementById('empty-cart-menu');
    const arrow = button.querySelector('span:last-child');
    
    if (menu.style.display === 'none' || !menu.style.display) {
      menu.style.display = 'block';
      button.classList.add('active');
      arrow.style.transform = 'rotate(180deg)';
      arrow.textContent = '▲';
    } else {
      menu.style.display = 'none';
      button.classList.remove('active');
      arrow.style.transform = 'rotate(0deg)';
      arrow.textContent = '▼';
    }
  };

  // Format Money with enhanced currency handling
  function formatMoney(cents) {
    const amount = cents / 100;
    return new Intl.NumberFormat('{{ localization.language.iso_code }}', {
      style: 'currency',
      currency: '{{ cart.currency.iso_code }}'
    }).format(amount);
  }

  // Enhanced Update Item Quantity - No notifications
  async function updateQuantity(key, newQuantity) {
    if (newQuantity < 0) return;
    
    try {
      // Show loading state
      const item = document.querySelector(`[data-key="${key}"]`);
      if (item) {
        item.style.opacity = '0.6';
        item.style.pointerEvents = 'none';
      }
      
      const response = await fetch('/cart/change.js', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify({
          id: key,
          quantity: newQuantity
        })
      });
      
      if (response.ok) {
        cartData = await response.json();
        renderCartDrawer();
        updateCartCount();
      }
      
    } catch (error) {
      console.error('Error updating quantity:', error);
    }
  }

  // Enhanced Remove Item with animation
  async function removeCartItem(key) {
    const item = document.querySelector(`[data-key="${key}"]`);
    if (item) {
      item.classList.add('removing');
    }
    
    setTimeout(() => {
      updateQuantity(key, 0);
    }, 300);
  }

  // Enhanced Auto-open cart drawer when product is added - No notifications
  function autoOpenCartDrawer(productHandle = null) {
    lastAddedProductHandle = productHandle;
    
    // Always open cart drawer when product is added
    setTimeout(() => {
      openCartDrawer();
    }, 100);
  }

  // Global function to be called from product forms - No notifications
  window.productAddedToCart = function(productHandle = null) {
    autoOpenCartDrawer(productHandle);
  };

  // ============ ENHANCED CART DRAWER JAVASCRIPT END ============

  // ============ EXISTING JAVASCRIPT (MEGA MENU, MOBILE MENU, ETC.) ============
  document.addEventListener('DOMContentLoaded', function() {
    // Function to position mega menu full width and dynamically adjust
    function positionMegaMenu() {
      const header = document.querySelector('.header-wrapper');
      const megaMenus = document.querySelectorAll('.mega-menu');
      
      if (!header || !megaMenus.length) return;
      
      // Get exact header position
      const headerRect = header.getBoundingClientRect();
      const topPosition = headerRect.bottom;
      
      // Set CSS variable for top position
      document.documentElement.style.setProperty('--mega-menu-top', `${topPosition}px`);
      
      // Apply to each mega menu for full width and dynamic adjustments
      megaMenus.forEach(menu => {
        menu.style.setProperty('--mega-menu-top', `${topPosition}px`);
        
        // Dynamic grid adjustments based on content
        const content = menu.querySelector('.mega-menu-content');
        if (content) {
          const columns = parseInt(content.getAttribute('data-columns') || '0');
          const items = parseInt(content.getAttribute('data-items') || '0');
          const screenWidth = window.innerWidth;
          
          // Remove existing dynamic classes
          content.classList.remove('dynamic-grid-1', 'dynamic-grid-2', 'dynamic-grid-3', 'dynamic-grid-4', 'dynamic-grid-5');
          
          // Add appropriate class based on screen size and content
          if (screenWidth >= 1400) {
            if (columns > 6) content.classList.add('dynamic-grid-1');
            else if (items > 20) content.classList.add('dynamic-grid-2');
          } else if (screenWidth >= 1200) {
            if (columns > 5) content.classList.add('dynamic-grid-3');
            else if (items > 15) content.classList.add('dynamic-grid-4');
          } else if (screenWidth >= 900) {
            if (columns > 4) content.classList.add('dynamic-grid-5');
          }
        }
      });
    }
    
    // Initial positioning
    positionMegaMenu();
    
    // Update on window resize with debouncing
    let resizeTimeout;
    window.addEventListener('resize', function() {
      clearTimeout(resizeTimeout);
      resizeTimeout = setTimeout(function() {
        positionMegaMenu();
      }, 100);
    });
    
    // Update on scroll for sticky header
    let lastScrollTop = 0;
    window.addEventListener('scroll', function() {
      const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
      const header = document.querySelector('.shopify-section-header');
      
      if (header) {
        if (scrollTop > lastScrollTop && scrollTop > 100) {
          header.classList.add('shopify-section-header-hidden');
        } else {
          header.classList.remove('shopify-section-header-hidden');
        }
        
        if (scrollTop > 50) {
          header.classList.add('shopify-section-header-sticky');
        } else {
          header.classList.remove('shopify-section-header-sticky');
        }
      }
      
      lastScrollTop = scrollTop;
      positionMegaMenu();
    });
    
    // Mobile Menu Functions
    window.toggleMobileMenu = function() {
      const menu = document.getElementById('mobile-menu');
      if (menu) {
        menu.classList.add('active');
        document.body.style.overflow = 'hidden';
      }
    }
    
    window.closeMobileMenu = function() {
      const menu = document.getElementById('mobile-menu');
      if (menu) {
        menu.classList.remove('active');
        document.body.style.overflow = '';
      }
    }
    
    window.toggleMobileDropdown = function(button) {
      const dropdown = button.parentElement.nextElementSibling;
      const isActive = dropdown.classList.contains('active');
      
      // Close all other dropdowns
      document.querySelectorAll('.mobile-dropdown.active').forEach(item => {
        item.classList.remove('active');
      });
      document.querySelectorAll('.mobile-dropdown-toggle').forEach(btn => {
        btn.textContent = '+';
        btn.classList.remove('active');
      });
      
      // Toggle current dropdown
      if (!isActive) {
        dropdown.classList.add('active');
        button.textContent = '−';
        button.classList.add('active');
      }
    }
    
    // Search Modal Functions - Desktop Only
    window.openSearchModal = function() {
      // Check if on desktop
      if (window.innerWidth > 990) {
        const modal = document.getElementById('search-modal');
        const input = document.getElementById('search-modal-input');
        
        if (modal) {
          modal.classList.add('active');
          document.body.style.overflow = 'hidden';
          
          setTimeout(() => {
            if (input) input.focus();
          }, 300);
        }
      }
    }
    
    window.closeSearchModal = function(event) {
      if (event && event.target !== event.currentTarget) return;
      
      const modal = document.getElementById('search-modal');
      if (modal) {
        modal.classList.remove('active');
        document.body.style.overflow = '';
      }
    }
    
    // Search functionality
    const searchInput = document.getElementById('search-modal-input');
    if (searchInput) {
      searchInput.addEventListener('keydown', function(e) {
        if (e.key === 'Enter') {
          e.preventDefault();
          const query = e.target.value.trim();
          if (query) {
            window.location.href = `/search?q=${encodeURIComponent(query)}`;
          }
        }
        
        if (e.key === 'Escape') {
          closeSearchModal();
        }
      });
    }
    
    // Close mobile menu on resize to desktop
    window.addEventListener('resize', function() {
      if (window.innerWidth > 990) {
        closeMobileMenu();
      }
    });
    
    // Handle mega menu hover delay
    let megaMenuTimeout;
    const navItems = document.querySelectorAll('.nav-item');
    
    navItems.forEach(item => {
      item.addEventListener('mouseenter', function() {
        clearTimeout(megaMenuTimeout);
        positionMegaMenu();
        
        // Close other mega menus
        navItems.forEach(otherItem => {
          if (otherItem !== item) {
            otherItem.classList.remove('active');
          }
        });
        
        this.classList.add('active');
      });
      
      item.addEventListener('mouseleave', function() {
        const item = this;
        megaMenuTimeout = setTimeout(() => {
          item.classList.remove('active');
        }, 300);
      });
    });
    
    // Prevent mega menu from closing when hovering over it
    const megaMenus = document.querySelectorAll('.mega-menu');
    megaMenus.forEach(menu => {
      menu.addEventListener('mouseenter', function() {
        clearTimeout(megaMenuTimeout);
      });
      
      menu.addEventListener('mouseleave', function() {
        const parentItem = this.closest('.nav-item');
        if (parentItem) {
          megaMenuTimeout = setTimeout(() => {
            parentItem.classList.remove('active');
          }, 300);
        }
      });
    });
    
    // Enhanced: Handle add to cart with automatic drawer opening - No notifications
    const addToCartForms = document.querySelectorAll('form[action*="/cart/add"]');
    addToCartForms.forEach(form => {
      form.addEventListener('submit', async function(e) {
        e.preventDefault();
        
        const submitButton = this.querySelector('[type="submit"]');
        const originalText = submitButton ? submitButton.textContent : '';
        
        // Try to get product handle from multiple sources
        let productHandle = '';
        if (window.location.pathname.includes('/products/')) {
          productHandle = window.location.pathname.split('/products/')[1].split('?')[0];
        } else {
          // Try to get from form data or page URL
          const pathSegments = window.location.pathname.split('/');
          const productIndex = pathSegments.indexOf('products');
          if (productIndex !== -1 && pathSegments[productIndex + 1]) {
            productHandle = pathSegments[productIndex + 1];
          }
        }
        
        if (submitButton) {
          submitButton.textContent = 'Adding...';
          submitButton.disabled = true;
        }
        
        try {
          const formData = new FormData(this);
          
          const response = await fetch('/cart/add.js', {
            method: 'POST',
            body: formData
          });
          
          if (response.ok) {
            const item = await response.json();
            
            // Set the last added product handle for recommendations
            lastAddedProductHandle = productHandle;
            
            // Auto-open cart drawer
            autoOpenCartDrawer(productHandle);
            
          } else {
            throw new Error('Failed to add to cart');
          }
          
        } catch (error) {
          console.error('Error adding to cart:', error);
        } finally {
          if (submitButton) {
            setTimeout(() => {
              submitButton.textContent = originalText;
              submitButton.disabled = false;
            }, 1000);
          }
        }
      });
    });
    
    // Enhanced: Listen for custom cart events - No notifications
    document.addEventListener('cart:item-added', function(event) {
      const productHandle = event.detail?.productHandle;
      autoOpenCartDrawer(productHandle);
    });
    
    // ESC key to close drawer and modals
    document.addEventListener('keydown', function(e) {
      if (e.key === 'Escape') {
        if (cartDrawerOpen) {
          closeCartDrawer();
        }
        closeSearchModal();
      }
    });
    
    // Initialize cart drawer with current cart data and load some default recommendations
    loadCartDrawer();
    
    // Load some initial recommendations
    setTimeout(() => {
      if (!lastAddedProductHandle) {
        loadRecommendations();
      }
    }, 1000);
    
    // Add smooth scroll behavior to cart drawer body
    const cartBody = document.getElementById('cart-drawer-body');
    if (cartBody) {
      cartBody.addEventListener('scroll', function() {
        // Smooth scrolling performance optimization
        this.style.scrollBehavior = 'smooth';
      });
    }
  });

  // ============ GLOBAL CART INTEGRATION FUNCTIONS ============

  // Function to be called from any product page or form - No notifications
  window.addToCartAndOpen = async function(variantId, quantity = 1, productHandle = null) {
    try {
      const formData = new FormData();
      formData.append('id', variantId);
      formData.append('quantity', quantity);
      
      const response = await fetch('/cart/add.js', {
        method: 'POST',
        body: formData
      });
      
      if (response.ok) {
        lastAddedProductHandle = productHandle;
        autoOpenCartDrawer(productHandle);
        return true;
      }
      return false;
    } catch (error) {
      console.error('Error adding to cart:', error);
      return false;
    }
  };

  // Function to manually trigger cart drawer refresh
  window.refreshCartDrawer = function() {
    if (cartDrawerOpen) {
      loadCartDrawer();
    }
  };

  // Function to check if cart drawer is open
  window.isCartDrawerOpen = function() {
    return cartDrawerOpen;
  };

  // ============ WISHLIST & COMPARE FUNCTIONALITY START ============

  // Wishlist State
  let wishlistItems = JSON.parse(localStorage.getItem('shopify_wishlist') || '[]');
  let compareItems = [];
  let relatedProducts = [];

  // Initialize wishlist count on page load
  document.addEventListener('DOMContentLoaded', function() {
    updateWishlistCount();
    updateCompareCount();
  });

  // Toggle Wishlist
  function toggleWishlist() {
    // This is a placeholder - you can implement full wishlist functionality
    alert('Wishlist functionality - You can implement a full wishlist page here');
    // For now, just animate the heart
    const heart = document.querySelector('.wishlist-heart');
    heart.classList.toggle('active');
  }

  // Update Wishlist Count
  function updateWishlistCount() {
    const wishlistBubble = document.getElementById('wishlist-count');
    if (wishlistBubble) {
      if (wishlistItems.length > 0) {
        wishlistBubble.textContent = wishlistItems.length;
        wishlistBubble.style.display = 'flex';
      } else {
        wishlistBubble.style.display = 'none';
      }
    }
  }

  // Update Compare Count
  function updateCompareCount() {
    const compareBubble = document.getElementById('compare-count');
    if (compareBubble) {
      if (compareItems.length > 0) {
        compareBubble.textContent = compareItems.length;
        compareBubble.style.display = 'flex';
      } else {
        compareBubble.style.display = 'none';
      }
    }
  }

  // Open Compare Modal
  async function openCompareModal() {
    const modal = document.getElementById('compare-modal');
    if (modal) {
      modal.classList.add('active');
      document.body.style.overflow = 'hidden';
      await loadRelatedProductsForCompare();
    }
  }

  // Close Compare Modal
  function closeCompareModal() {
    const modal = document.getElementById('compare-modal');
    if (modal) {
      modal.classList.remove('active');
      document.body.style.overflow = '';
    }
  }

  // Load Related Products Based on Cart Items
  async function loadRelatedProductsForCompare() {
    const gridContainer = document.getElementById('compare-products-grid');
    if (!gridContainer) return;
    
    gridContainer.innerHTML = '<p style="text-align: center; padding: 20px;">Loading products...</p>';
    
    try {
      // Get current cart data
      const cartResponse = await fetch('/cart.js');
      const cartData = await cartResponse.json();
      
      if (!cartData.items || cartData.items.length === 0) {
        gridContainer.innerHTML = '<p style="text-align: center; padding: 20px;">Your cart is empty. Add items to cart first to compare related products.</p>';
        return;
      }
      
      // Extract product titles and handles from cart
      const cartProductInfo = cartData.items.map(item => ({
        title: item.product_title,
        handle: item.handle,
        id: item.product_id
      }));
      
      // Fetch related products based on cart items
      relatedProducts = [];
      
      // Try to get products from the same collections as cart items
      for (const cartItem of cartProductInfo.slice(0, 3)) { // Use first 3 cart items
        try {
          // Get product details to find its collections
          const productResponse = await fetch(`/products/${cartItem.handle}.js`);
          if (productResponse.ok) {
            const productData = await productResponse.json();
            
            // If product has collections, fetch products from those collections
            if (productData.collections && productData.collections.length > 0) {
              const collectionHandle = productData.collections[0].handle;
              const collectionResponse = await fetch(`/collections/${collectionHandle}/products.json?limit=10`);
              
              if (collectionResponse.ok) {
                const collectionData = await collectionResponse.json();
                if (collectionData.products) {
                  relatedProducts.push(...collectionData.products);
                }
              }
            }
          }
        } catch (error) {
          console.log('Error fetching related products for:', cartItem.handle);
        }
      }
      
      // Fallback: Get products from all products collection
      if (relatedProducts.length < 10) {
        try {
          const allProductsResponse = await fetch('/collections/all/products.json?limit=20');
          if (allProductsResponse.ok) {
            const allProductsData = await allProductsResponse.json();
            if (allProductsData.products) {
              relatedProducts.push(...allProductsData.products);
            }
          }
        } catch (error) {
          console.log('Error fetching fallback products');
        }
      }
      
      // Remove duplicates and cart items
      const cartProductIds = cartData.items.map(item => item.product_id);
      const uniqueProducts = relatedProducts.filter((product, index, self) => 
        index === self.findIndex(p => p.id === product.id) && 
        !cartProductIds.includes(product.id)
      ).slice(0, 12); // Show up to 12 products
      
      // Render the products
      if (uniqueProducts.length > 0) {
        renderCompareProducts(uniqueProducts, gridContainer);
      } else {
        gridContainer.innerHTML = '<p style="text-align: center; padding: 20px;">No related products found.</p>';
      }
      
    } catch (error) {
      console.error('Error loading products for comparison:', error);
      gridContainer.innerHTML = '<p style="text-align: center; padding: 20px; color: #e74c3c;">Error loading products. Please try again.</p>';
    }
  }

  // Render Compare Products Grid
  function renderCompareProducts(products, container) {
    let html = '';
    
    products.forEach(product => {
      const price = formatMoney(product.variants[0].price * 100);
      const imageUrl = product.images[0] ? product.images[0] + '?width=160' : '';
      const isSelected = compareItems.some(item => item.id === product.id);
      
      html += `
        <div class="compare-product-card ${isSelected ? 'selected' : ''}" 
             data-product-id="${product.id}"
             onclick="toggleCompareProduct(${product.id})">
          <img src="${imageUrl}" 
               alt="${product.title}" 
               class="compare-product-image"
               onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iODAiIGZpbGw9Im5vbmUiIHZpZXdCb3g9IjAgMCA4MCA4MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNNDAgMjBjMTEuMDQ2IDAgMjAgOC45NTQgMjAgMjBzLTguOTU0IDIwLTIwIDIwLTIwLTguOTU0LTIwLTIwIDguOTU0LTIwIDIwLTIwWm0tNy4wNzEgNy4wNzFhMTQgMTQgMCAwIDAgMCAxOS43OThhMTQgMTQgMCAwIDAgMTkuNzk4IDBMNDM5IDM5bC05LjE5Mi05LjE5MloiIGZpbGw9IiNlNWU1ZTUiLz48L3N2Zz4='">
          <div class="compare-product-name">${product.title}</div>
          <div class="compare-product-price">${price}</div>
        </div>
      `;
    });
    
    container.innerHTML = html;
  }

  // Toggle Product Selection for Comparison
  function toggleCompareProduct(productId) {
    const product = relatedProducts.find(p => p.id === productId);
    if (!product) return;
    
    const existingIndex = compareItems.findIndex(item => item.id === productId);
    
    if (existingIndex > -1) {
      // Remove from comparison
      compareItems.splice(existingIndex, 1);
    } else {
      // Add to comparison (max 2 items)
      if (compareItems.length >= 2) {
        alert('You can compare maximum 2 products at a time');
        return;
      }
      compareItems.push(product);
    }
    
    // Update UI
    updateCompareUI();
    updateCompareCount();
  }

  // Update Compare UI
  function updateCompareUI() {
    // Update selected state in grid
    document.querySelectorAll('.compare-product-card').forEach(card => {
      const productId = parseInt(card.dataset.productId);
      if (compareItems.some(item => item.id === productId)) {
        card.classList.add('selected');
      } else {
        card.classList.remove('selected');
      }
    });
    
    // Update comparison table
    const emptyState = document.getElementById('compare-empty-state');
    const compareTable = document.getElementById('compare-table');
    const compareActions = document.getElementById('compare-actions');
    
    if (compareItems.length === 2) {
      // Show comparison table
      if (emptyState) emptyState.style.display = 'none';
      if (compareTable) {
        compareTable.style.display = 'grid';
        renderComparisonTable();
      }
      if (compareActions) compareActions.style.display = 'flex';
    } else {
      // Show empty state
      if (emptyState) emptyState.style.display = 'block';
      if (compareTable) compareTable.style.display = 'none';
      if (compareActions) compareActions.style.display = 'none';
    }
  }

  // Render Comparison Table
  function renderComparisonTable() {
    const compareTable = document.getElementById('compare-table');
    if (!compareTable || compareItems.length !== 2) return;
    
    const [product1, product2] = compareItems;
    
    // Extract product details
    const details1 = extractProductDetails(product1);
    const details2 = extractProductDetails(product2);
    
    let html = `
      <!-- Header -->
      <div class="compare-table-header">
        <div class="compare-header-label">FEATURE</div>
        <div class="compare-header-product">
          <button class="compare-remove-btn" onclick="removeFromComparison(${product1.id})">×</button>
          <img src="${details1.image}" alt="${product1.title}" class="compare-product-main-image">
          <div class="compare-product-title">${product1.title}</div>
          <div class="compare-product-main-price">${details1.price}</div>
        </div>
        <div class="compare-header-product">
          <button class="compare-remove-btn" onclick="removeFromComparison(${product2.id})">×</button>
          <img src="${details2.image}" alt="${product2.title}" class="compare-product-main-image">
          <div class="compare-product-title">${product2.title}</div>
          <div class="compare-product-main-price">${details2.price}</div>
        </div>
      </div>
      
      <!-- Comparison Rows -->
      <div class="compare-table-row">
        <div class="compare-row-label">Price</div>
        <div class="compare-row-value ${details1.rawPrice < details2.rawPrice ? 'better' : ''}">${details1.price}</div>
        <div class="compare-row-value ${details2.rawPrice < details1.rawPrice ? 'better' : ''}">${details2.price}</div>
      </div>
      
      <div class="compare-table-row">
        <div class="compare-row-label">Availability</div>
        <div class="compare-row-value">${details1.availability}</div>
        <div class="compare-row-value">${details2.availability}</div>
      </div>
      
      <div class="compare-table-row">
        <div class="compare-row-label">SKU</div>
        <div class="compare-row-value">${details1.sku}</div>
        <div class="compare-row-value">${details2.sku}</div>
      </div>
      
      <div class="compare-table-row">
        <div class="compare-row-label">Vendor</div>
        <div class="compare-row-value">${details1.vendor}</div>
        <div class="compare-row-value">${details2.vendor}</div>
      </div>
      
      <div class="compare-table-row">
        <div class="compare-row-label">Type</div>
        <div class="compare-row-value">${details1.type}</div>
        <div class="compare-row-value">${details2.type}</div>
      </div>
      
      <div class="compare-table-row">
        <div class="compare-row-label">Tags</div>
        <div class="compare-row-value">${details1.tags}</div>
        <div class="compare-row-value">${details2.tags}</div>
      </div>
      
      <div class="compare-table-row">
        <div class="compare-row-label">Options</div>
        <div class="compare-row-value">${details1.options}</div>
        <div class="compare-row-value">${details2.options}</div>
      </div>
    `;
    
    compareTable.innerHTML = html;
  }

  // Extract Product Details
  function extractProductDetails(product) {
    const variant = product.variants[0];
    return {
      image: product.images[0] ? product.images[0] + '?width=300' : '',
      price: formatMoney(variant.price * 100),
      rawPrice: variant.price,
      availability: variant.available ? 'In Stock' : 'Out of Stock',
      sku: variant.sku || 'N/A',
      vendor: product.vendor || 'N/A',
      type: product.product_type || 'N/A',
      tags: product.tags.length > 0 ? product.tags.slice(0, 3).join(', ') : 'N/A',
      options: product.options.map(opt => opt.name).join(', ') || 'N/A'
    };
  }

  // Remove from Comparison
  function removeFromComparison(productId) {
    compareItems = compareItems.filter(item => item.id !== productId);
    updateCompareUI();
    updateCompareCount();
  }

  // Clear Comparison
  function clearComparison() {
    compareItems = [];
    updateCompareUI();
    updateCompareCount();
  }

  // Add Both Compared Products to Cart
  async function addComparedToCart() {
    if (compareItems.length !== 2) return;
    
    const button = event.target;
    const originalText = button.textContent;
    button.textContent = 'Adding...';
    button.disabled = true;
    
    try {
      // Add both products to cart
      for (const product of compareItems) {
        const formData = new FormData();
        formData.append('id', product.variants[0].id);
        formData.append('quantity', 1);
        
        await fetch('/cart/add.js', {
          method: 'POST',
          body: formData
        });
      }
      
      // Update cart drawer
      await loadCartDrawer();
      updateCartCount();
      
      button.textContent = 'Added to Cart!';
      button.style.background = '#4CAF50';
      
      setTimeout(() => {
        button.textContent = originalText;
        button.style.background = '';
        button.disabled = false;
        
        // Clear comparison and close modal
        clearComparison();
        closeCompareModal();
        openCartDrawer(); // Open cart drawer to show added items
      }, 2000);
      
    } catch (error) {
      console.error('Error adding products to cart:', error);
      button.textContent = 'Error - Try Again';
      button.style.background = '#e74c3c';
      
      setTimeout(() => {
        button.textContent = originalText;
        button.style.background = '';
        button.disabled = false;
      }, 2000);
    }
  }

  // Close modals on ESC key
  document.addEventListener('keydown', function(e) {
    if (e.key === 'Escape') {
      closeCompareModal();
    }
  });

  // ============ WISHLIST & COMPARE FUNCTIONALITY END ============
</script>

<!-- Sticky Header JavaScript -->
{% javascript %}
  class StickyHeader extends HTMLElement {
    constructor() {
      super();
    }

    connectedCallback() {
      this.header = document.querySelector('.shopify-section-header');
      this.headerBounds = {};
      this.currentScrollTop = 0;
      this.preventReveal = false;

      this.onScrollHandler = this.onScroll.bind(this);
      window.addEventListener('scroll', this.onScrollHandler, false);
      this.createObserver();
    }

    disconnectedCallback() {
      window.removeEventListener('scroll', this.onScrollHandler);
    }

    createObserver() {
      let observer = new IntersectionObserver((entries, observer) => {
        this.headerBounds = entries[0].intersectionRect;
        if (this.headerBounds.top === 0 && this.headerBounds.bottom === 0) {
          const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
          const boundingClientRect = entries[0].boundingClientRect;
          this.headerBounds = {
            top: scrollTop + boundingClientRect.top,
            bottom: scrollTop + boundingClientRect.bottom
          };
        }
        observer.disconnect();
      });
      observer.observe(this.header);
    }

    onScroll() {
      const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
      
      if (scrollTop > this.currentScrollTop && scrollTop > this.headerBounds.bottom) {
        requestAnimationFrame(this.hide.bind(this));
      } else if (scrollTop < this.currentScrollTop && scrollTop > this.headerBounds.bottom) {
        if (!this.preventReveal) {
          requestAnimationFrame(this.reveal.bind(this));
        }
      } else if (scrollTop <= this.headerBounds.top) {
        requestAnimationFrame(this.reset.bind(this));
      }
      
      this.currentScrollTop = scrollTop;
    }

    hide() {
      this.header.classList.add('shopify-section-header-hidden', 'shopify-section-header-sticky');
    }

    reveal() {
      this.header.classList.add('shopify-section-header-sticky');
      this.header.classList.remove('shopify-section-header-hidden');
    }

    reset() {
      this.header.classList.remove('shopify-section-header-hidden', 'shopify-section-header-sticky');
    }
  }
  customElements.define('sticky-header', StickyHeader);
{% endjavascript %}

{% schema %}
{
  "name": "Header",
  "class": "shopify-section-header",
  "settings": [
    {
      "type": "header",
      "content": "Logo Settings"
    },
    {
      "type": "image_picker",
      "id": "logo",
      "label": "Desktop Logo"
    },
    {
      "type": "image_picker",
      "id": "mobile_logo",
      "label": "Mobile Logo"
    },
    {
      "type": "range",
      "id": "logo_height",
      "min": 30,
      "max": 200,
      "step": 2,
      "default": 50,
      "unit": "px",
      "label": "Desktop Logo Height"
    },
    {
      "type": "range",
      "id": "mobile_logo_height",
      "min": 30,
      "max": 200,
      "step": 2,
      "default": 44,
      "unit": "px",
      "label": "Mobile Logo Height"
    },
    {
      "type": "header",
      "content": "Menu Settings"
    },
    {
      "type": "link_list",
      "id": "menu",
      "default": "main-menu",
      "label": "Main Menu",
      "info": "Select your main navigation menu. Collections with images will automatically display in mega menus."
    },
    {
      "type": "checkbox",
      "id": "enable_dropdown_menu",
      "default": true,
      "label": "Enable Mega Menu",
      "info": "Show mega menus for menu items with sub-items"
    },
    {
      "type": "header",
      "content": "You May Also Like Settings"
    },
    {
      "type": "collection",
      "id": "recommended_collection",
      "label": "You May Also Like Collection",
      "info": "Select collection for recommended products. This will be the PRIMARY source for recommendations in cart drawer."
    },
    {
      "type": "text",
      "id": "recommended_title",
      "label": "Recommended Section Title",
      "default": "FKLDAJSLFKJASKLFJASKLJFKLASJFKL"
    },
    {
      "type": "range",
      "id": "recommended_products_count",
      "min": 10,
      "max": 100,
      "step": 5,
      "default": 30,
      "label": "Number of Recommended Products",
      "info": "How many products to show in recommendations (minimum 30 recommended)"
    },
    {
      "type": "header",
      "content": "Empty Cart Menu Settings"
    },
    {
      "type": "checkbox",
      "id": "show_empty_cart_menu",
      "label": "Show Menu When Cart is Empty",
      "info": "Display navigation menu in empty cart to help users browse",
      "default": true
    },
    {
      "type": "select",
      "id": "empty_cart_menu_type",
      "label": "Menu Display Style",
      "options": [
        {
          "value": "toggle",
          "label": "Toggle Button (Click to Show/Hide)"
        },
        {
          "value": "direct",
          "label": "Always Visible"
        }
      ],
      "default": "toggle",
      "info": "How to display the menu"
    },
    {
      "type": "link_list",
      "id": "empty_cart_menu",
      "label": "Custom Empty Cart Menu (Optional)",
      "info": "Select a custom menu for empty cart. If not selected, main menu will be used."
    },
    {
      "type": "text",
      "id": "empty_cart_menu_title",
      "label": "Menu Title",
      "default": "Browse Menu",
      "info": "Title to show above the menu"
    },
    {
      "type": "header",
      "content": "Header Behavior"
    },
    {
      "type": "checkbox",
      "id": "enable_sticky_header",
      "default": true,
      "label": "Enable Sticky Header"
    },
    {
      "type": "checkbox",
      "id": "show_line_separator",
      "default": true,
      "label": "Show Border Line"
    },
    {
      "type": "select",
      "id": "cart_icon",
      "options": [
        {
          "value": "cart",
          "label": "Cart"
        },
        {
          "value": "bag",
          "label": "Bag"
        }
      ],
      "default": "cart",
      "label": "Cart Icon Style"
    },
    {
      "type": "header",
      "content": "Transparent Header"
    },
    {
      "type": "checkbox",
      "id": "enable_transparent_header",
      "label": "Enable Transparent Header",
      "info": "Make header background transparent. Works best on homepage with hero sections.",
      "default": false
    },
    {
      "type": "color",
      "id": "transparent_text_color",
      "label": "Transparent Header Text Color",
      "info": "Text color when header is transparent",
      "default": "#ffffff"
    },
    {
      "type": "header",
      "content": "Colors"
    },
    {
      "type": "color",
      "id": "colors_text",
      "label": "Text Color",
      "default": "#282828"
    },
    {
      "type": "color",
      "id": "colors_icons",
      "label": "Icons Color",
      "info": "Color for header icons (search, account, cart, etc.)",
      "default": "#282828"
    },
    {
      "type": "color",
      "id": "colors_border",
      "label": "Border Color",
      "default": "#d2d5d9"
    },
    {
      "type": "color",
      "id": "colors_background",
      "label": "Background Color",
      "default": "#f8f6f3"
    },
    {
      "type": "color",
      "id": "colors_highlight",
      "label": "Highlight/Hover Color",
      "info": "Color when hovering over links and buttons",
      "default": "#A85A3B"
    },
    {
      "type": "header",
      "content": "Spacing"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 36,
      "step": 2,
      "unit": "px",
      "label": "Top Padding",
      "default": 12
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 36,
      "step": 2,
      "unit": "px",
      "label": "Bottom Padding",
      "default": 12
    }
  ]
}
{% endschema %}